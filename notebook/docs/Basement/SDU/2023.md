# 2023年山东大学专硕真题分析

[[TOC]]

## 选择题

### 04 存储体提速


> 低位交叉编址的存储器实质上能（ ）独立的读写操作。 A.一次并行执行 B.多次并行执行 C.一次串行执行 D.多次串行执行

误选A，应选B。考察交叉编址，低位交叉存储器在每个存取周期$T$上有多次数据传送，而高位交叉存储器只有一次数据传送，所以认为是多次执行。并行是因为各存储器之间并行传输数据。


::: warning 低位交叉编址的多体模块

低位地址表示体号，存储时每个存储体分开存相邻的4字节，4个存储体的读/写过程重叠进行。

原因：总线传输周期 $\tau$ << 存取周期 $T$，存储体读取的时间可以同时用总线传输数据。

---

注意区分 存取周期$T$ 和 总线传输周期$\tau$；

**存取周期 $T$**：每个存储体连续存取的间隔时间；

**总线传输周期 $\tau$**：每个存储体的字读出的时间，每次总线只能传送一个存储体的内容；

存储器交叉存取度 $m = T/\tau$，交叉存储器要求其模块数必须大于等于 $m$；

连续读取 $n$ 个字需要的时间为 $t_1 = T + (n-1)\tau$；
:::

### 05 数据的存放方式

> 某计算机存储器按字节变址，采用小端方式存放数据。假定编译器规定 `int` 型和 `short` 型长度分别为 32 位和 16 位，并且数据按边界对齐存储。某 C 语言程序段如下：
>```cpp
>struct{
>    int a;
>    char b;
>    short c;
>} record;
>record.a = 273;
> ```
> 若 `record` 变量的首地址为 0xC008，则地址 0xC008 中内容及 `record.c` 的地址是（ ）。 A.0x00、0xC00D B.0x00、0xC00E C.0x11、0xC00D D.0x11、0xC00E

误选B，应选D。考察按边界对齐，错误原因为没有考虑“按边界对齐存储”。

::: warning 内存对齐的三原则
结构体变量的**起始地址**能够被其**最宽的成员**大小整除；

结构体**总体大小**能够被**最宽的成员**的大小整除，如不能则在后面补充字节;

结构体**每个成员相对于起始地址的偏移**能够被其**自身大小**整除，如果不能则在前一个成员后面补充字节；
:::

### 06 Cache 缺失率

> 有如下 C 语言程序段：
> ```cpp
> for(k=0; k<1000; k++) 
>     a[k] = a[k]+32;
> ```
> 若数组 a 及变量 k 均为 int 型，int 型数据占 4B，数据 Cache 采用直接映射方式，数据区大小为 1KB、块大小为 16B， 该程序段执行前 Cache 为空，则该程序段执行过程中访问数组 a 的 Cache 缺失率约为( )。 A.1.25% B.2.5% C.12.5% D.25%

误选D，应选C。考察 Cache 缓存。没有分析程序执行的过程，首先取 `a[k]`，访存一次，缺失后载入 Cache，之后依次访问 `a[k]` ~ `a[k+3]` 共访问七次，之后取 `a[k+4]`，缺失，形成循环。

::: warning Cache 和主存的映射关系
**直接映射**

Cache 行号 = 主存块号 mod Cache 总行数

直接映射中，主存地址如下分割：

|主存块数(主存字块标记)|Cache块数(Cache字块地址)|字块内索引(字块内地址)|
|:---:|:---:|:---:|

Cache地址如下分割：

|主存块数(主存字块标记)|字块内索引(字块内地址)|
|:---:|:---:|

**全相联映射**

全相联映射中，主存地址如下分割：

|主存块数(主存字块标记)|字块内索引(字块内地址)|
|:---:|:---:|

Cache地址如下分割：

|主存块数(主存字块标记)|字块内索引(字块内地址)|
|:---:|:---:|

**组相联映射**

组相联映射中，主存地址如下分割：

|主存地址剩余字段(主存字块标记)|Cache组数(组地址)|字块内索引(字块内地址)|
|:---:|:---:|:---:|

Cache地址如下分割：

|主存地址剩余字段(主存字块标记)|字块内索引(字块内地址)|
|:---:|:---:|

这里的映射规则是以Cache组数为模运算，映射到余数对应的组。
:::

### 08 总线传输速率

> 某同步总线采用数据线和地址线复用方式。其中地址/数据线有32根，总伐时钟频率为66MHZ，每个时钟同期传送两次数据。（上升沿和下降沿各传送一次数据）该总线的最大数据传输率是（总线带宽）（ ）。A.132MB/S B.264MB/S C.528MB/S D.1056MB/S

误选B，应选C。考察总线。

**总线带宽**：指总线在单位时间内可以传输的数据总数。这里要求的是总线带宽，求总线带宽是不分数据和地址的，也就是说地址也算数据。

::: warning 宽度和带宽
总线宽度=总线位宽=数据线的根数

总线的传输速率 = 总线的带宽 =（总线位宽/8位）*（总线工作频率/总线周期时钟数）
:::

## 简答题

### 01 存储器的层次

> 存储器的层次结构主要体现在什么地方？这些层次主要解决什么问题？计算机如何管理这些层次？

考察存储器层次。存储器的层次结构主要体现在“Cache-主存”和“内存-辅存”两个方面；

解决什么问题？“Cache-主存”主要解决主存与CPU速度不匹配的问题，引入速度快但昂贵且容量小的 Cache，提升系统整体效率；“内存-辅存”主要解决存储容量与存储速度的问题，内存速度快但容量小，辅存容量大但速度慢。

如何管理？**我的回答**：速度越快、容量越小的存储器离计算机CPU越近，优先与CPU进行数据交换，而辅助存储只能与内存进行直接数据交换。**参考答案**：主存与Cache之间的信息调度全部由硬件自动完成，主存与辅存层次的调度通过虚拟存储技术实现，将主存与辅存的一部分通过软硬结合的方式形成虚拟存储器，两个层次上的调度对于程序员都是透明的。

### 03 IO编址

> I/O 有哪些编址方式，各有何特点？

考察 I/O 编址，I/O 有“I/O 与内存统一的编址方式”和“I/O 独立编址方式”；特点注重地址空间和访问I/O设备的指令设计两方面即可。

## 设计题

### 01 存储器与CPU的连接

> 设CPU共有16根地址线，8根数据线，并用$\overline{MREQ}$作访存控制信号，$\overline{WR}$作为读写命令信号(高电平为读，,低电平为写)。现有下列存储芯片：1Kx4位RAM 、4Kx8位RAM、2Kx8位ROM以及74138译码器和各种门电路。主存地址空间分配：8000H~87FFH为系统程序区；8800H~8BFFH为用户程序区。回答下列问题：
> 
> (1) 合理利用上述存储芯片，说明各选芯片。
> 
> (2) 详细画出存储芯片的片选逻辑图。


我在解这道题时，对74138译码器的掌握较差，除了输入输出端外，其他接口我记不得了。同时，我对低有效和高有效的理解有一些问题。


::: warning 74138译码器
当一个选通端（$G_1$）为高电平，另两个选通端（$\overline{G_2}$和$\overline{G_3}$）为低电平时，可将地址端（$A$、$B$、$C$）的二进制编码在一个对应的输出端以低电平译出。
:::

::: danger 关于逻辑电平
对逻辑电平的理解是能够画出电路图的基础

![img](https://mysite-bucket.oss-cn-wulanchabu.aliyuncs.com/tech_blog_img/%E4%BD%8E%E7%94%B5%E5%B9%B3%E6%9C%89%E6%95%88%E7%9A%84%E7%90%86%E8%A7%A3.png?x-oss-process=style/small_size_rule)

**疑惑1**：题目要求$A_{14}$要输出高电平表示1，$A_{15}$要输出低电平表示0，$\overline{G_{2A}}$要输入低电平，为什么不直接把$A_{15}$接到$\overline{G_{2A}}$上面，而是要接一个反向器。

**疑惑2**：$\overline{MREQ}$是低使能，$\overline{G_{2A}}$和$\overline{G_{2B}}$也是低使能，应该直接接过去。

**正确理解**：$\overline{G_{2A}}$是低电平表示1，高电平表示0，**这里要的是0，所以这里要的是高电平**。同理，$\overline{MREQ}$输出的是低电平表示1，$\overline{G_{2B}}$要的是高电平表示0，所以要取反。

:::