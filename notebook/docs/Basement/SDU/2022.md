# 2022年山东大学专硕真题分析

## 选择题

### 03

> 存储器中地址号分别为1000#、1001#、1002#、1003#的4个连续存储单元，分别保存的字节数据是1A、2B、3C、4D，如果数据字长为32位,存储器采用的是小端对齐模式，则这4个存储单元存储的数据值应被解析为?

小端地址和大端地址指的是存储的**最后的字节的地址是在大地址还是小地址**。

视地址为从左到右增长，大端存储和人类书写类似，从左往右写，小端存储和人类书写相反，整体从左往右写，但每个字内从右往左写。此为小端地址存储，结果为4D3C2B1A。

## 简答题

### 02

> 中断方式和DMA方式的异同点？各应用于哪些场合？

#### 1. 我的回答

异同点：都是外设与内存交互的方式。中断方式外设设备通过CPU与主存交互，而DMA方式外设直接与主存进行交互，CPU短时间内交出内存控制权，且DMA的访存权限大于CPU。

适用场合：中断适用传输速率低的外设，DMA适用传输速率高的外设。

#### 2. 答案补充

异同点

- **1)** 中断方式是程序的切换，需要保护现场和恢复现场；DMA方式除了预处理和后处理，其他时间不占用CPU的任何资源；
- **2)** 对中断的响应只能发生在指令执行后，对DMA请求的响应可以发生在每个机器周期结束时，只要CPU不占用总线就可被选中；
- **3)** (是否需要CPU干预)；
- **4)** (优先级)；
- **5)** 中断靠程序传送，DMA靠硬件传送；

适用场合

- 中断具有对异常事件的处理能力，DMA适用告诉外设的成组数据传送。


### 03

> 按配偶原则配置0011的汉明码

海明码为王道网络中的相关内容，这里进行补充

::: info 海明码

根据 $2^k \geq k+r+1$，$2^3 \geq 3+r+1$，这里取$k$为 $3$,有 $3$ 位纠错码。

纠错码放在 $2^0 2^1 2^2 2^3$ 的位置，设为 $P_x$，按照序号二进制为 $0001$ $0010$ $0100$ $1000$ 的位置存储，数据码设为 $D_x$ 如下：

|   序号| 1    | 2    | 3    | 4    | 5    | 6    | 7    |
|:---: |:---: |:---: |:---: |:---: |:---: |:---: |:---: |
|序号二进制|0001|0010 | 0011 | 0100 | 0101 | 0110 | 0111 |
|       | $P_1$|$P_2$| $D_1$ | $P_3$| $D_2$| $D_3$| $D_4$ |
|  数值 |      |      |     0|      |     0|     1|     1|
| get$P_1$ |  |      |    1 |      |     1|      |   1  |
| get$P_2$ |  |      |    1 |      |      |     1|   1  |
| get$P_3$ |  |      |      |      |     1|     1|   1  |

计算 $P_1$：$P_1$ 位数为 $0001$，找第四位和其相同的，$P_1 = D_1 \oplus D_2 \oplus D_4$ = $0 \oplus 0 \oplus 1$ = $1$

计算 $P_2$：$P_2$ 位数为 $0010$，找第四位和其相同的，$P_2 = D_1 \oplus D_3 \oplus D_4$ = $0 \oplus 1 \oplus 1$ = $0$

计算 $P_3$：$P_3$ 位数为 $0100$，找第四位和其相同的，$P_3 = D_2 \oplus D_3 \oplus D_4$ = $0 \oplus 1 \oplus 1$ = $0$

因此汉明码为 $1000011$。

|   序号| 1    | 2    | 3    | 4    | 5    | 6    | 7    |
|:---: |:---: |:---: |:---: |:---: |:---: |:---: |:---: |
|序号二进制|0001|0010 | 0011 | 0100 | 0101 | 0110 | 0111 |
|  | $P_1$| $P_2$| $D_1$| $P_3$| $D_2$| $D_3$| $D_4$|
| 汉明码 |  1|     0|      0|     0|     0|     1|   1  |
| 错误码 |  1|     0|      0|     0|     1|     1|   1  |

现假设第 $5$ 位变为 $1$，即变为 $1000111$，计算如下：

计算 $P_1$：$P_1 = D_1 \oplus D_2 \oplus D_4$ = $0 \oplus 1 \oplus 1$ = $0$

计算 $P_2$：$P_2 = D_1 \oplus D_3 \oplus D_4$ = $0 \oplus 1 \oplus 1$ = $0$

计算 $P_3$：$P_3 = D_2 \oplus D_3 \oplus D_4$ = $1 \oplus 1 \oplus 1$ = $1$

$P_3P_2P_1$ 值为 $100$，即 $5$，说明第 $5$ 位出错。

:::

### 04

> 某计算机字长16位，主存容量为64K字，采用单字长单地址指令，共有64条指令，试采用四种寻址方式（立即、直接、基值、相对）设计指令格式，并写出这四种寻址方式的有效地址计算方法。

这道题体现了我对形式地址的理解不深刻，认为64K就是需要16位地址，从而陷入把所有的位数都分为地址位的怪圈，正解为四种寻址方式可对形式地址进行扩展。

分配指令如下：

| 操作码 6 位 | 寻址方式 2 位 | 形式地址D 剩余的 8 位 |
|:---:       |:---:          |:---:                |

有效地址计算方法分别为：

- 立即寻址：立即数 = D字段；
- 直接寻址：`EA = D字段`；
- 基址寻址：`EA = (基址寄存器的值)* + D字段`；
- 相对寻址：`EA = (PC)* + D字段`；

::: warning * 答案强调了存储器的位数
答案给出如下：

- 基址寻址：`EA = (R) + D字段`，R为16位基址寄存器；
- 相对寻址：`EA = (PC) + D字段`，PC为16位程序计数器；
:::

