# 对象的创建与使用

## 构造方法

特殊方法，没有类型，若干构造方法需参数个数或类型不同。

默认一个构造方法，其无参数，没有语句，如下：

```java
Ladder(){

}
```

如果定义构造方法，则无默认构造方法。

## 创建对象

分为声明对象和对象分配变量两部分。

`new` 运算符 + 类构造方法为对象分配变量，即创建对象。

---

**声明对象**后，对象内存为 null，无数据，是空对象。

**分配变量**后，先为成员变量分配内存空间并赋初值，计算出引用值，把引用值传递给变量名。

创建多个变量成员变量占多个内存空间，产生多个引用值。

::: warning 引用值
引用值是十六进制数，即表达式 `new Class()` 的值是一个十六进制的引用值，计算出引用值后，将成员变量和对象关联起来才算对象诞生。
:::

::: warning 内存模型
- **栈**：引用存放在栈中，优势是存储快，缺点是数据大小和生命周期必须是确定的，缺乏灵活性。
- **堆**：对象实体存放在堆中，的优势是动态分配内存大小，生命周期不需事先告诉编译器，JVM 会自动回收不需要的空间，缺点是动态分配内存导致存取慢。

Java 自动管理堆和栈，JVM 会自动回收不需要空实体，希望 JVM 立即垃圾收集使用 `System.gc()`。

C++ 没有 JVM 内存管理机制，因此需要手动释放堆中的空间，否则会引起内存泄漏。
:::


## 使用对象

访问符 `.`，匿名对象也可使用，如 `new People().speak();` 或 `new People().age = 10;`，避免使用匿名对象访问自己的变量，以免引起混乱。局部变量在方法执行完毕后即释放内存。

---

改变对象的引用是可以的，使用 `System.indentityHashCode(object)` 直接返回引用，使用 `System.out.println(object)` 输出带前缀 `@` 的引用。JVM 会自动周期性清理未引用变量。

::: danger 避免使用空对象
使用会跳 NullPointerException，Java 编译器不对空对象检查，因对象可以动态分配实体。
:::







