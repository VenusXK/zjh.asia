# 存储器的数据存放

本专题内容对应本书的存储器概述部分(P72)，重点介绍了主存中存储单元地址的分配，首先介绍一些基本概念：

- **位**：电子计算机中最小的数据单位；
- **字节**：由8个位组成，它是存储空间的基本计量单位；
- **字**：由若干个字节组成，数据线条数等于存储字长；
- **寻址**：当CPU请求数据时获得该数据在内存上的位置的过程。


## 题型1：按字存储和按字节存储

这类问题主要考察具体是怎么存储的，典型的问法如下：

-  *CPU按字节访问的地址范围？*
-  *CPU按字访问的地址范围？*

我认为这种问题的解决关键是要意识到**字节是最基本的存储单位**。


内存每一个存储位置的最小单元都可以储存0或1，即一个位的内容，而内存将8个位设定为一个存储空间的基本单位。而在**地址线上每一个地址的编号便对应的是一个存储位置的最小的基本单位，即字节**。

**按字节寻址**时，一个地址线表示的数(即状态)与一个字节地址相对应。

**按字寻址**时，每一个地址值指向了一个字，一个字里面有任意个字节，那么计算机如何知道其地址指向的到底是字中的第几个字节呢？这便需要地址线中分出一部分标出其所指的到底是字中的第一个字节，还是第二个。

::: info 举例
一个计算机有30根地址线，如果按字寻址，其字的字长为32位的话，那么每个字长有4个字节，4个字节用二进制编码需要两位来区分(比如第1、2、3、4个字节分别为00，01，10，11)因此真正用来表示字的位置的地址线有30-2=28根，其寻址范围是2^28=256MW。注意这里单位为W表示一个字。
:::

不论哪种方式，其编码内存中存储基本单位(即B)的数量是一样的，因为字节是存储空间的基本计量单位。

::: info 举例

20根地址线和16根数据线的情况，每次读出的是16位，即2字节。

**按字节访问**：地址范围为 `1M`，单位是字节，因为每个地址对应1字节的内容，注意不是一次性读出的内容，而是按基本存储单位存储的情况；

**按字访问**：的地址范围为 `512K`，单位是字，因为一次读出两个字节，即地址线给出一个地址，数据线输出2个字节(16位)
:::

## 题型2：用高位字节或低位字节表示字地址

这里考察的是**一个字中的字节**在计算机中是如何存放的，规定从左往右，左侧为高位，右侧为低位（可以联想整数的表示法），则可以得出如下结论:

- 高位表示法中，低字节在左侧，高字节在右侧；
    |*字地址*|字节地址1|字节地址2|字节地址3|字节地址4
    |:---:|:---:|:---:|:---:|:---:|
    |*0*|0|1|2|3|
    |*4*|4|5|6|7|
    |*8*|8|9|10|11|
- 低位表示法中，低字节在右侧，高字节在左侧；
    |*字地址*|字节地址1|字节地址2|字节地址3|字节地址4
    |:---:|:---:|:---:|:---:|:---:|
    |*0*|3|2|1|0|
    |*4*|7|6|5|4|
    |*8*|11|10|9|8|

此类问题可能会融入到其他问题中考察，如果弄不对，就会整道题做不出来，后果十分严重，比如下方的例题。

::: info 例题
书第319页，例7.3

牛客网：https://www.nowcoder.com/questionTerminal/b5414b74a479455983fc4cb7fa810b6f?page=1&onlyReference=false


一条双字长直接寻址的子程序调用指令，其第一个字为操作码和寻址特征，第二个字为地址码 5000H 。假设 PC 当前值为 2000H ， SP 的内容为 0100H ，栈顶内容为 2746H ，存储器按字节编址，而且进栈操作是先 (SP) – Δ → SP ，后存入数据。试回答 CALL 指令被读取前的情况下， PC 、 SP 及栈顶内容各为多少？
:::