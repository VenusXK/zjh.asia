# 存储器设计

<img src="https://mysite-bucket.oss-cn-wulanchabu.aliyuncs.com/illustrations/3d-fluency-ssd.png?x-oss-process=style/small_size_rule" style="width: 100px;padding: 2px; float:right">

山大832会在计组最后两道题中考察存储器设计。这类题目的核心在于地址的划分，比较有套路。但是，对于比较复杂的地址划分比较令人头疼。

## 基础题型：只简单设计片选

此类题目较为普遍，只需要根据内存地址进行片选划分即可。

- **选定芯片**：这个较为简单，不必多说；
- **划分地址空间**：根据题目要求划分即可，没有要求连续地址的可以断开；
- **划分片内地址和片选地址**：这一步有点像计网 IP 的 CIDR 划分；
- **根据片选地址接38译码器**：这一步需要记住38译码器的一些使用规范，包括 `MREQ` 和 `G_2A` `G_2B` 要连接，`G1` 直接接5V，高地址驱动 `A` `B` `C` 进行译码，同时注意如果有空余的地址线没有与存储芯片连接，需要将其与对应的译码结果结合。 

::: info 例题
书第95页，例4.1
:::

::: info 例题
书第95页，例4.2

也可看这里：https://blog.csdn.net/qq_45760401/article/details/115329452
:::

## 扩展1：考察存储的本质

这类问题主要考察具体是怎么存储的，典型的问法如下：

-  *CPU按字节访问的地址范围？*
-  *CPU按字访问的地址范围？*

我认为这种问题的解决关键是要意识到**字节是最基本的存储单位**。

**位**是电子计算机中最小的数据单位，**字节**由8个位组成，它是存储空间的基本计量单位。**字**由若干个字节组成，数据线条数等于存储字长。**寻址**指当CPU请求数据时获得该数据在内存上的位置的过程。

内存每一个存储位置的最小单元都可以储存0或1，即一个位的内容，而内存将8个位设定为一个存储空间的基本单位。而在**地址线上每一个地址的编号便对应的是一个存储位置的最小的基本单位，即字节**。

**按字节寻址**时，一个地址线表示的数(即状态)与一个字节地址相对应。

**按字寻址**时，每一个地址值指向了一个字，一个字里面有任意个字节，那么计算机如何知道其地址指向的到底是字中的第几个字节呢？这便需要地址线中分出一部分标出其所指的到底是字中的第一个字节，还是第二个。

::: info 举例
一个计算机有30根地址线，如果按字寻址，其字的字长为32位的话，那么每个字长有4个字节，4个字节用二进制编码需要两位来区分(比如第1、2、3、4个字节分别为00，01，10，11)因此真正用来表示字的位置的地址线有30-2=28根，其寻址范围是2^28=256MW。注意这里单位为W表示一个字。
:::

不论哪种方式，其编码内存中存储基本单位(即B)的数量是一样的，因为字节是存储空间的基本计量单位

::: info 举例

20根地址线和16根数据线的情况，每次读出的是16位，即2字节。

**按字节访问**：地址范围为 `1M`，单位是字节，因为每个地址对应1字节的内容，注意不是一次性读出的内容，而是按基本存储单位存储的情况；

**按字访问**：的地址范围为 `512K`，单位是字，因为一次读出两个字节，即地址线给出一个地址，数据线输出2个字节(16位)

:::