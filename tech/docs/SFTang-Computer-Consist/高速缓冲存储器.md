# 高速缓冲存储器

832对高速缓冲存储器设置了相当多的考点，陈列如下：

- Cache 的基本工作原理
- Cache 和主存之间的映射方式及其地址转换
- Cache 中主存块的替换算法
- Cache 读写策略

其中，基本工作原理、替换策略和读写策略属于记忆内容，只需要把书中的知识点记住即可，而 Cache 和主存之间的映射方式及其地址转换属于重点内容，需要重点理解。

## 题型1：平均访问时间和访问效率

平均访问时间 $t_a = ht_c + (1-h)t_m$，访问效率 $e = \frac{t_c}{t_a} = \frac{t_c}{ht_c + (1-h)t_m}$

::: info 例题
书第111页，例4.7
:::

::: info 例题
《王道讲义》书第82页，综合应用题2
:::

## 题型2：Cache-主存地址映射

### 直接映射

直接映射中，主存地址如下分割：

|主存块组数(主存字块标记)|Cache块数(Cache字块地址)|字块内索引(字块内地址)|
|:---:|:---:|:---:|

Cache地址如下分割：

|主存块组数(主存字块标记)|字块内索引(字块内地址)|
|:---:|:---:|

### 全相联映射

全相联映射中，主存地址如下分割：

|主存块数(主存字块标记)|字块内索引(字块内地址)|
|:---:|:---:|

Cache地址如下分割：

|主存块数(主存字块标记)|字块内索引(字块内地址)|
|:---:|:---:|

### 组相联映射

组相联映射中，主存地址如下分割：

|主存地址剩余字段(主存字块标记)|Cache组数(组地址)|字块内索引(字块内地址)|
|:---:|:---:|:---:|

Cache地址如下分割：

|主存地址剩余字段(主存字块标记)|字块内索引(字块内地址)|
|:---:|:---:|

这里的映射规则比较难理解，是以Cache组数为模运算，映射到余数组，具体可以看书 P119 图 4.56。

::: info 例题
书第120页，例4.8
:::

::: warning 例题
书第120页，例4.9

本题中，可以将512Kx32位容量直接理解为1024Kx16位，这一点我略有疑问。
:::