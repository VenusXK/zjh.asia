# 浮点数的表示和运算

## 溢出与规格化

### 2009统考真题

> 浮点数加减运算过程一般包括对阶、尾数运算、规格化、舍入和判溢出等步骤。设浮点数的阶码和尾数均采用补码表示，且位数分别为 5 位和 7 位 ( 均含 2 位符号位 ) 。若有两个数 $X=2^{7} × 29/32$ ， $Y=2^{5} × 5/8$ ，则浮点加法计算 $X+Y$ 的最终结果是：
> 
> A.`00111 1100010` B.`00111  0100010` C.`01000 0010001` D.发生溢出

应选D，考察**规格化**与**溢出**，浮点数的溢出不是以尾数溢出来判断的，尾数溢出可以通过右规操作得到纠正，运算结果溢出主要看结果的指数是否发生了溢出。

::: warning 溢出的情况
溢出有两种情况：1) 右规或尾数舍入阶码上溢；2) 左规阶码下溢；
:::

### 2010统考真题

> 假定变量i、f和d的数据类型分别为int、float和double（int用补码表示，float和double分别用IEEE754单精度和双精度浮点数格式表示），已知 i=785，f=1.5678e3，d=1.5e100。若在32位机器中执行下列关系表达式，则结果为“真”的是（ ） <br>Ⅰ.`i==(int)(float)i` Ⅱ.`f==(float)(int)f` Ⅲ.`f==(float)(double)f` Ⅳ.`(d+f)-d==f`<br> A.仅Ⅰ和Ⅱ B.仅Ⅰ和Ⅲ C.仅Ⅱ和Ⅲ D.仅Ⅲ和Ⅳ

应选B，如果用 `float` 表示整数，只能用 23 位精度存储整数，而 int 可以用 31 位精度存储整数，但是这里不涉及越界。注意Ⅳ选项，在对阶的时候f一直右规，而右规次数大于尾数能表示的范围，因此f中的数据变为0。

::: warning IEEE754表示的数据的范围
`float` 表示范围为 $2^{-126} \sim 2^{127}\times(2-2^{-23})$，表示范围约为$[-3.4E38, 3.4E38]$；

`double` 表示范围为 $2^{-1022} \sim 2^{1023}\times(2-2^{-52})$，表示范围约为$[-1.7E308, 1.7E308]$；
:::

## 浮点数范围 <Badge type="danger" text="设定上的小坑" />

### 2012统考真题

> float 类型（即 IEEE754 单精度浮点数格式）能表示的最大整数是（ ）。 
> 
> A.$2^{126}-2^{103}$ B.$2^{127}-2^{104}$ C.$2^{127}-2^{103}$ D.$2^{128}-2^{104}$

### 2018统考真题

> IEEE 754 单精度浮点格式表示的数中，最小的规格化正数是 
> 
> A.$1.0×2^{−126}$ B.$1.0×2^{−127}$ C.$1.0×2^{−128}$ D.$1.0×2^{−149}$

上述两种题考察阶码的范围，注意这里阶码的范围有特例，$1 \sim 254$ 为可使用的阶码，$255$ 代表 $\pm\infty$，$0$ 代表值为 $\pm 0$，在计算时不可使用。

## 负数大小的比较

### 2014统考真题

> float型整数据常用IEEE754单精度浮点格式表示，假设两个float型变量x和y分别在32为寄存器f1和f2中，若(f1)=CC900000H，(f2)=B0C00000H，则x和y之间的关系为 （） 
> 
> A.x\<y且符号相同 B.x\<y且符号不同 C.x\>y且符号相同 D.x\>y且符号不同

这道题的关键点在于意识到绝对值大的反而小，不能忽视这一点。

## IEEE754规范计算

### 2011统考真题

> float 型数据通常用 IEEE754 单精度浮点数格式表示。若编译器将 float 型变量 x 分配在一个 32 位浮点寄存器 FR1 中，且 x=-8.25，则 FR1 的内容是（ ）。
> 
>  A.`C104 0000H` B.`C242 0000H` C.`C184 0000H` D.`C1C2 0000H`

单纯地考察IEEE754规范的计算。
